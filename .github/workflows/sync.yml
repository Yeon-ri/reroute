name: Sync Fork

on:
  schedule:
    - cron: '*/10 * * * *' # 매일 자정(UTC 기준)에 실행
  workflow_dispatch: # 수동으로도 실행 가능하게 함

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout target repo
        uses: actions/checkout@v3
        with:
          ref: main             # 1. 업데이트할 내 브랜치 (main 또는 master)
          fetch-depth: 0

      - name: Configure Git
        run: |
          git config --global user.name 'github-actions[bot]'
          git config --global user.email 'github-actions[bot]@users.noreply.github.com'

      - name: Add Upstream and Sync
        run: |
          # 2. 원본(Upstream) 레포지토리 주소를 입력하세요
          git remote add upstream https://github.com/moondonghyun/reroute.git
          git fetch upstream
          
          # 3. 원본의 브랜치명 (보통 main 또는 master)
          git checkout main 
          git merge upstream/main
          
          # 변경사항 Push
          git push origin main
